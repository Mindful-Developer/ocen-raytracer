import std::value::Value
import @utils::{ error, float_from_json }

enum MaterialType {
    Diffused
    Reflective
    Refractive(idx: f32)
    Light
}

def MaterialType::from_json(json: &Value): MaterialType {
    return match json["type"].as_cstr() {
        "diffused" => Diffused
        "reflective" => Reflective
        "refractive" => Refractive(float_from_json(json["index"]))
        "light" => Light
        else => error(json, "error: invalid material type")
    }
}